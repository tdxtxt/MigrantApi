<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.soecode.ton.dao.UserDao">
	 <insert id="insertUser">
		<!-- ignore 主键冲突，报错 -->
		INSERT ignore INTO user (userId,otherBundId,userName,mobile,password,type,areaId,jobTypeId,senior,createTime)
		VALUES (#{userId},#{otherbundId},#{userName},#{mobile},#{password},#{type},#{areaId},#{jobTypeId},#{senior},NOW())
	</insert> 
	<!-- 目的：为dao接口方法提供sql语句配置 -->
	<select id="queryByName" resultType="com.soecode.ton.entity.User" parameterType="String">
		<!-- 具体的sql -->
		SELECT
		*
		FROM
		user
		WHERE
		userName = #{userName}
	</select>
	<select id="queryById" resultType="com.soecode.ton.entity.User" parameterType="String">
		<!-- 具体的sql -->
		SELECT
		*
		FROM
		user
		WHERE
		userId = #{userId}
	</select>
	<select id="queryByOtherBundId" resultType="com.soecode.ton.entity.User" parameterType="String">
		<!-- 具体的sql -->
		SELECT
		*
		FROM
		user
		WHERE
		otherBundId = #{otherBundId}
	</select>
	<select id="queryByMobile" resultType="com.soecode.ton.entity.User" parameterType="String">
		<!-- 具体的sql -->
		SELECT
		*
		FROM
		user
		WHERE
		mobile = #{mobile}
	</select>
	<select id="countMobile" resultType="Integer" parameterType="String">
		<!-- 具体的sql -->
		SELECT
		COUNT(*)
		FROM
		user
		WHERE
		mobile = #{mobile}
		LIMIT 1
	</select>
	<select id="countOtherBundId" resultType="Integer" parameterType="String">
		<!-- 具体的sql -->
		SELECT
		COUNT(*)
		FROM
		user
		WHERE
		otherBundId = #{otherBundId}
		LIMIT 1
	</select>
	<select id="queryPwdByMobile" resultType="String" parameterType="String">
		SELECT password FROM user WHERE mobile = #{mobile}
	</select>
	<update id="modifyById" parameterType="map">
		UPDATE user SET
		userName = #{userName},
		mobile = #{mobile},
		areaId = #{areaId},
		jobTypeId = #{jobTypeId},
		senior = #{senior}
		WHERE userId = #{userId}
	</update>
	<select id="getUsePeoples" resultType="com.soecode.ton.entity.User">
		SELECT * FROM user WHERE userState="0" LIMIT #{start},#{pageSize}
	</select>
</mapper>